# ğŸ“Š System Architecture & Flow Diagrams

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USER INTERFACE                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Login    â”‚  â”‚ Dashboard  â”‚  â”‚  Messages  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚    Logs    â”‚  â”‚   Layout   â”‚  â”‚   Routing  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                               â”‚
â”‚              React + Vite + Tailwind CSS                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HTTP/HTTPS
                        â”‚ JWT Auth
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REST API LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Express.js Server                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚    Auth     â”‚  â”‚    Sheet     â”‚  â”‚ Scheduler  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   Routes    â”‚  â”‚   Routes     â”‚  â”‚   Routes   â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚          Middleware Layer                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - JWT Auth                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - Rate Limiting                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - CORS                                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - Helmet Security                          â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BUSINESS LOGIC LAYER                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Google     â”‚  â”‚   WhatsApp   â”‚  â”‚  Scheduler   â”‚      â”‚
â”‚  â”‚   Sheets     â”‚  â”‚   Service    â”‚  â”‚   Service    â”‚      â”‚
â”‚  â”‚   Service    â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                  â”‚                  â”‚              â”‚
â”‚         â”‚                  â”‚                  â”‚              â”‚
â”‚    Read/Write         Send Messages      Cron Jobs          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google Sheets  â”‚  â”‚  WhatsApp Cloud â”‚  â”‚  Background  â”‚
â”‚   (Database)    â”‚  â”‚      API        â”‚  â”‚    Jobs      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

### 1. Message Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. Add message to sheet
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google Sheet      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Row added    â”‚  â”‚
â”‚  â”‚ Status:      â”‚  â”‚
â”‚  â”‚ Pending      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 2. Sync (every 5 min)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Server     â”‚
â”‚ Google Sheets      â”‚
â”‚ Service            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 3. Read & cache data
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scheduler Service  â”‚
â”‚ Checks every min   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 4. Calculate trigger time
         â”‚    (meeting - 15 min)
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Wait   â”‚
    â”‚ Until  â”‚
    â”‚ Triggerâ”‚
    â”‚ Time   â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚ 5. Time reached!
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WhatsApp Service   â”‚
â”‚ Send message       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 6. API call
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WhatsApp Cloud API â”‚
â”‚ Message sent       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 7. Success/Failure
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Google      â”‚
â”‚ Sheet Status       â”‚
â”‚ - Sent / Failed    â”‚
â”‚ - Timestamp        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 8. Log result
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Message Logs       â”‚
â”‚ Stored in memory   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 9. View in dashboard
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Dashboard    â”‚
â”‚ Shows statistics   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. Open app
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Login Page     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 2. Enter credentials
     â”‚    email + password
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/auth/    â”‚
â”‚       login         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 3. Validate
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Controller    â”‚
â”‚  - Check email      â”‚
â”‚  - Verify password  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 4. Generate JWT
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JWT Token          â”‚
â”‚  {email, exp: 24h}  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 5. Return token
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend           â”‚
â”‚  Store in          â”‚
â”‚  localStorage       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 6. Redirect to dashboard
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard Page     â”‚
â”‚  (Protected)        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 7. Every API call includes:
     â”‚    Authorization: Bearer <token>
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Requests       â”‚
â”‚  with JWT           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… Scheduler Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Scheduler Service Started      â”‚
â”‚      (on backend startup)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
         â”‚           â”‚
    Every 1 min   Every 5 min
         â”‚           â”‚
         â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check for    â”‚  â”‚ Sync Google  â”‚
â”‚ Messages to  â”‚  â”‚ Sheets       â”‚
â”‚ Send         â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Pending Messages           â”‚
â”‚ - Status = Pending             â”‚
â”‚ - Current Time >= Trigger Time â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Any?  â”‚â”€â”€â”€â”€â”€â”€Noâ”€â”€â”€â”€â”€â”€â”
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜              â”‚
      Yes                 â”‚
       â”‚                  â”‚
       â–¼                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ For each     â”‚          â”‚
â”‚ message:     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
       â”‚                  â”‚
       â”œâ”€â†’ Validate phone â”‚
       â”‚                  â”‚
       â”œâ”€â†’ Format message â”‚
       â”‚                  â”‚
       â”œâ”€â†’ Send via       â”‚
       â”‚    WhatsApp API  â”‚
       â”‚                  â”‚
       â”œâ”€â†’ Update status  â”‚
       â”‚    in Sheet      â”‚
       â”‚                  â”‚
       â””â”€â†’ Log result     â”‚
                          â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Wait 1 min   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â†’ Repeat
```

---

## ğŸ¯ Component Hierarchy (Frontend)

```
App (main.jsx)
â”‚
â”œâ”€â”€ AuthProvider (Context)
â”‚
â””â”€â”€ BrowserRouter
    â”‚
    â”œâ”€â”€ Route: /login
    â”‚   â””â”€â”€ Login Page
    â”‚
    â””â”€â”€ PrivateRoute
        â”‚
        â”œâ”€â”€ Layout
        â”‚   â”œâ”€â”€ Navigation Bar
        â”‚   â”‚   â”œâ”€â”€ Logo
        â”‚   â”‚   â”œâ”€â”€ Menu Items
        â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard
        â”‚   â”‚   â”‚   â”œâ”€â”€ Messages
        â”‚   â”‚   â”‚   â””â”€â”€ Logs
        â”‚   â”‚   â””â”€â”€ User Info + Logout
        â”‚   â”‚
        â”‚   â””â”€â”€ Main Content Area
        â”‚       â”‚
        â”‚       â”œâ”€â”€ Route: /dashboard
        â”‚       â”‚   â””â”€â”€ Dashboard Page
        â”‚       â”‚       â”œâ”€â”€ Stats Cards (4)
        â”‚       â”‚       â”‚   â”œâ”€â”€ Total
        â”‚       â”‚       â”‚   â”œâ”€â”€ Pending
        â”‚       â”‚       â”‚   â”œâ”€â”€ Sent
        â”‚       â”‚       â”‚   â””â”€â”€ Failed
        â”‚       â”‚       â”œâ”€â”€ Scheduler Status
        â”‚       â”‚       â””â”€â”€ Action Buttons
        â”‚       â”‚
        â”‚       â”œâ”€â”€ Route: /messages
        â”‚       â”‚   â””â”€â”€ Messages Page
        â”‚       â”‚       â”œâ”€â”€ Filter Tabs
        â”‚       â”‚       â”œâ”€â”€ Messages Table
        â”‚       â”‚       â””â”€â”€ Refresh Button
        â”‚       â”‚
        â”‚       â””â”€â”€ Route: /logs
        â”‚           â””â”€â”€ Logs Page
        â”‚               â”œâ”€â”€ Log Entries
        â”‚               â”œâ”€â”€ Clear Button
        â”‚               â””â”€â”€ Refresh Button
        â”‚
        â””â”€â”€ Route: / (redirect to /dashboard)
```

---

## ğŸ—„ï¸ Backend Architecture

```
server.js (Entry Point)
â”‚
â”œâ”€â”€ Middleware Stack
â”‚   â”œâ”€â”€ helmet() - Security headers
â”‚   â”œâ”€â”€ cors() - CORS protection
â”‚   â”œâ”€â”€ express.json() - JSON parser
â”‚   â”œâ”€â”€ express.urlencoded() - Form parser
â”‚   â””â”€â”€ rateLimit() - Rate limiting
â”‚
â”œâ”€â”€ Routes
â”‚   â”‚
â”‚   â”œâ”€â”€ /api/auth
â”‚   â”‚   â”œâ”€â”€ POST /login
â”‚   â”‚   â””â”€â”€ GET /verify
â”‚   â”‚
â”‚   â”œâ”€â”€ /api/sheet (protected)
â”‚   â”‚   â”œâ”€â”€ GET /messages
â”‚   â”‚   â”œâ”€â”€ GET /pending
â”‚   â”‚   â”œâ”€â”€ GET /stats
â”‚   â”‚   â””â”€â”€ POST /sync
â”‚   â”‚
â”‚   â””â”€â”€ /api/scheduler (protected)
â”‚       â”œâ”€â”€ GET /status
â”‚       â”œâ”€â”€ POST /trigger
â”‚       â”œâ”€â”€ GET /logs
â”‚       â”œâ”€â”€ DELETE /logs
â”‚       â””â”€â”€ GET /health
â”‚
â”œâ”€â”€ Controllers
â”‚   â”œâ”€â”€ authController
â”‚   â”‚   â”œâ”€â”€ login()
â”‚   â”‚   â””â”€â”€ verifyToken()
â”‚   â”‚
â”‚   â”œâ”€â”€ sheetController
â”‚   â”‚   â”œâ”€â”€ getAllMessages()
â”‚   â”‚   â”œâ”€â”€ getPendingMessages()
â”‚   â”‚   â”œâ”€â”€ getStats()
â”‚   â”‚   â””â”€â”€ syncSheet()
â”‚   â”‚
â”‚   â””â”€â”€ schedulerController
â”‚       â”œâ”€â”€ getSchedulerStatus()
â”‚       â”œâ”€â”€ triggerCheck()
â”‚       â”œâ”€â”€ getMessageLogs()
â”‚       â”œâ”€â”€ clearMessageLogs()
â”‚       â””â”€â”€ checkWhatsAppHealth()
â”‚
â””â”€â”€ Services (Business Logic)
    â”‚
    â”œâ”€â”€ googleSheetsService
    â”‚   â”œâ”€â”€ initialize()
    â”‚   â”œâ”€â”€ readSheet()
    â”‚   â”œâ”€â”€ getPendingMessages()
    â”‚   â”œâ”€â”€ updateRowStatus()
    â”‚   â”œâ”€â”€ getStats()
    â”‚   â””â”€â”€ resetLastProcessedRow()
    â”‚
    â”œâ”€â”€ whatsappService
    â”‚   â”œâ”€â”€ sendMessage()
    â”‚   â”œâ”€â”€ sendMessageWithRetry()
    â”‚   â”œâ”€â”€ validatePhoneNumber()
    â”‚   â”œâ”€â”€ formatMessage()
    â”‚   â”œâ”€â”€ getMessageLogs()
    â”‚   â”œâ”€â”€ clearMessageLogs()
    â”‚   â””â”€â”€ checkHealth()
    â”‚
    â””â”€â”€ schedulerService
        â”œâ”€â”€ start()
        â”œâ”€â”€ stop()
        â”œâ”€â”€ checkAndSendMessages()
        â”œâ”€â”€ processMessage()
        â”œâ”€â”€ syncSheet()
        â”œâ”€â”€ triggerCheck()
        â”œâ”€â”€ triggerSync()
        â”œâ”€â”€ getStatus()
        â””â”€â”€ resetStats()
```

---

## ğŸ“Š Database Schema (Google Sheets)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Google Sheet                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  A   â”‚   B   â”‚  C   â”‚  D   â”‚  E   â”‚  F   â”‚  G   â”‚    H     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚teacherâ”‚studentâ”‚phone_â”‚messageâ”‚meetingâ”‚meetingâ”‚statusâ”‚ sent_atâ”‚
â”‚_name  â”‚_name  â”‚numberâ”‚       â”‚_date  â”‚_time  â”‚      â”‚         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Text â”‚ Text  â”‚ Text â”‚ Text â”‚ Date â”‚ Time â”‚ Enum â”‚DateTime â”‚
â”‚      â”‚       â”‚      â”‚      â”‚YYYY- â”‚HH:mm â”‚Pend- â”‚ISO 8601 â”‚
â”‚      â”‚       â”‚+code â”‚{{}}  â”‚MM-DD â”‚      â”‚ing   â”‚         â”‚
â”‚      â”‚       â”‚      â”‚      â”‚      â”‚      â”‚Sent  â”‚         â”‚
â”‚      â”‚       â”‚      â”‚      â”‚      â”‚      â”‚Failedâ”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Relationships:
- Row Index â†’ Unique identifier
- Status â†’ Determines if message should be sent
- meeting_date + meeting_time â†’ Calculate trigger time
- sent_at â†’ Auto-filled after sending
```

---

## ğŸ”„ State Management (Frontend)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     AuthContext (Global)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ user: { email }           â”‚  â”‚
â”‚  â”‚ loading: boolean          â”‚  â”‚
â”‚  â”‚ login(email, pass)        â”‚  â”‚
â”‚  â”‚ logout()                  â”‚  â”‚
â”‚  â”‚ checkAuth()               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
          Used by all
          protected pages
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          â”‚          â”‚
    â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Dashboardâ”‚â”‚Messages â”‚â”‚  Logs   â”‚
â”‚ State   â”‚â”‚ State   â”‚â”‚ State   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚stats    â”‚â”‚messages â”‚â”‚logs     â”‚
â”‚schedulerâ”‚â”‚filter   â”‚â”‚loading  â”‚
â”‚loading  â”‚â”‚loading  â”‚â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Layers                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  1ï¸âƒ£ Frontend Security                   â”‚
â”‚     - Token storage (localStorage)     â”‚
â”‚     - Auto-logout on 401               â”‚
â”‚     - Protected routes                 â”‚
â”‚     - No secrets in code               â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  2ï¸âƒ£ Network Security                    â”‚
â”‚     - HTTPS (production)               â”‚
â”‚     - CORS configuration               â”‚
â”‚     - Rate limiting                    â”‚
â”‚     - Helmet security headers          â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  3ï¸âƒ£ Authentication Security             â”‚
â”‚     - JWT tokens (24h expiry)          â”‚
â”‚     - Password hashing (bcryptjs)      â”‚
â”‚     - Secure token verification        â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  4ï¸âƒ£ API Security                        â”‚
â”‚     - Input validation                 â”‚
â”‚     - Error sanitization               â”‚
â”‚     - Request authentication           â”‚
â”‚     - Authorization checks             â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  5ï¸âƒ£ Data Security                       â”‚
â”‚     - Environment variables            â”‚
â”‚     - Service account auth             â”‚
â”‚     - Secure API credentials           â”‚
â”‚     - No secrets exposed               â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Performance Optimization Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Performance Optimizations         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Backend                             â”‚
â”‚  â”œâ”€ Efficient API calls             â”‚
â”‚  â”œâ”€ Caching (last processed row)    â”‚
â”‚  â”œâ”€ Configurable intervals          â”‚
â”‚  â”œâ”€ Retry with backoff              â”‚
â”‚  â””â”€ Async/await throughout          â”‚
â”‚                                      â”‚
â”‚  Frontend                            â”‚
â”‚  â”œâ”€ Code splitting (React Router)   â”‚
â”‚  â”œâ”€ Vite fast builds                â”‚
â”‚  â”œâ”€ Tailwind CSS optimization       â”‚
â”‚  â”œâ”€ Efficient re-renders            â”‚
â”‚  â””â”€ Lazy loading ready              â”‚
â”‚                                      â”‚
â”‚  Database                            â”‚
â”‚  â”œâ”€ Batch reads from sheets         â”‚
â”‚  â”œâ”€ Minimal write operations        â”‚
â”‚  â””â”€ Row tracking                    â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Error Handling Flow

```
Error Occurs
    â”‚
    â”œâ”€â†’ Frontend Error
    â”‚   â”œâ”€ API Error
    â”‚   â”‚  â”œâ”€ 401 â†’ Logout & redirect
    â”‚   â”‚  â”œâ”€ 403 â†’ Show error
    â”‚   â”‚  â”œâ”€ 404 â†’ Show error
    â”‚   â”‚  â””â”€ 500 â†’ Show error
    â”‚   â”‚
    â”‚   â””â”€ UI Error
    â”‚      â””â”€ Show error message
    â”‚
    â””â”€â†’ Backend Error
        â”œâ”€ Google Sheets Error
        â”‚  â”œâ”€ Log error
        â”‚  â””â”€ Return 500 response
        â”‚
        â”œâ”€ WhatsApp API Error
        â”‚  â”œâ”€ Log error
        â”‚  â”œâ”€ Retry (up to 3 times)
        â”‚  â””â”€ Update status: Failed
        â”‚
        â””â”€ General Error
           â”œâ”€ Log to console
           â”œâ”€ Sanitize error message
           â””â”€ Return error response
```

---

**Understanding these diagrams will help you:**
- Navigate the codebase
- Debug issues
- Extend functionality
- Deploy the application
- Optimize performance

For detailed code documentation, see the source files with comprehensive comments.

---

**Last Updated:** December 2025
